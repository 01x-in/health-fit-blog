---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blogs')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Health & Fitness Blog">
	<section class="max-w-4xl mx-auto">
		<div class="mb-8 text-center">
			<h1 class="text-4xl font-extrabold tracking-tight lg:text-5xl mb-4">Latest Insights</h1>
			<p class="text-slate-600 text-lg">Stay updated with the best health and fitness news.</p>
		</div>

		<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
			{
				posts.map((post) => (
					<a href={`${import.meta.env.BASE_URL}/blog/${post.slug}/`} class="group block p-6 bg-white rounded-lg shadow-sm hover:shadow-md transition-all border border-slate-100">
						<div class="flex flex-col h-full">
							<div class="mb-4">
								<span class="inline-block px-3 py-1 text-xs font-semibold tracking-wider text-teal-600 uppercase bg-teal-50 rounded-full">
									{post.slug.split('/')[0]}
								</span>
							</div>
							<h3 class="text-xl font-bold text-slate-900 group-hover:text-teal-600 transition-colors mb-2">
								{post.data.title}
							</h3>
							<p class="text-slate-500 line-clamp-3 text-sm flex-grow">
								{post.data.description}
							</p>
							<div class="mt-4 text-xs text-slate-400 font-medium">
								{post.data.pubDate.toLocaleDateString('en-us', {
									year: 'numeric',
									month: 'short',
									day: 'numeric',
								})}
							</div>
						</div>
					</a>
				))
			}
		</div>
        {posts.length === 0 && (
            <div class="text-center py-12">
                <p class="text-slate-500">No blog posts found. Run the Jules Agent to fetch news!</p>
            </div>
        )}
	</section>
</Layout>
